---
import PublicLayout from "@/layouts/public-layout.astro";
import LeadershipTree from "@/components/person/leadership-tree";
import { personUsecase } from "@/core/person/usecase";
import { Config } from "@/config";

const levels = await personUsecase.getPersonRankTree().then((levels) =>
  levels.map((level) =>
    level.map((person) => ({
      ...person,
      portrait: person.portrait ? Config.getFileURL(person.portrait) : null,
    })),
  ),
);
---

<PublicLayout>
  <slot slot="head">
    <title>ผู้นำและผู้บังคับบัญชา - มณฑลทหารบกที่ 16</title>
    <meta
      name="description"
      content="พบกับผู้นำและผู้บังคับบัญชาของมณฑลทหารบกที่ 16 รวมถึงโครงสร้างการบังคับบัญชา"
    />
    <style>
      .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
      .scrollbar-hide::-webkit-scrollbar {
        display: none;
      }
    </style>
  </slot>
  <slot slot="body">
    <main class="min-h-screen bg-gradient-to-b from-primary/10 to-background">
      <section class="py-16">
        <div class="container px-4 mx-auto">
          <h2 class="text-3xl font-bold text-center mb-12">
            โครงสร้างการบังคับบัญชา
          </h2>
          <LeadershipTree levels={levels} client:load />
        </div>
      </section>
    </main>
  </slot>
</PublicLayout>
